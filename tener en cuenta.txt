1. Limpieza y Protecci√≥n
Limpieza del √≠ndice: Elimin√© los m√°s de 16,000 archivos que se hab√≠an agregado accidentalmente (principalmente la cach√© de .pnpm-store).
Actualizaci√≥n de 
.gitignore
: Modifiqu√© el archivo 
.gitignore
 para bloquear permanentemente las carpetas de cach√© de pnpm y los reportes de Playwright (playwright-report/, test-results/). Esto evita que vuelvan a ensuciar tu Git en el futuro.
2. Gesti√≥n de Ramas
Creaci√≥n de qa/fichasp1: Cre√© esta nueva rama local espec√≠ficamente para tus pruebas profesionales de QA.
Commit de herramientas de QA: En esta rama he guardado los archivos de infraestructura:
tests/ (Carpeta de Playwright)
src/__tests__/ (Pruebas unitarias)
vitest.config.ts (Configuraci√≥n de pruebas)
docker-compose.e2e.yaml (Entorno de contenedores para pruebas)
Limpieza de dev: Regres√© a la rama dev, hice un reset --hard origin/dev y un pull para asegurar que est√© 100% limpia y sincronizada con el servidor, sin rastros de los archivos de QA.
Sincronizaci√≥n: Finalmente, mezcl√© (merge) los √∫ltimos cambios de dev hacia qa/fichasp1, por lo que tu rama de QA ahora tiene el c√≥digo m√°s reciente y todas tus herramientas listas para usar.
üìã Estado Actual
Rama Activa: qa/fichasp1 (Tiene todo: c√≥digo nuevo + herramientas QA).
Rama dev: Intacta y limpia (Como si las herramientas de QA nunca hubieran pasado por ah√≠).
üí° Recomendaciones para tu flujo de QA
No hagas push desde QA: Como mencionaste, mant√©n esta rama local. Git te avisar√° que la rama no existe en origin, lo cual es normal.
Para actualizar con nuevos cambios: Cuando tus compa√±eros suban c√≥digo a main o dev, simplemente haz:
powershell


git checkout dev
git pull origin dev
git checkout qa/fichasp1
git merge dev
Esto traer√° las nuevas funciones a tu entorno de pruebas sin ensuciar la rama de desarrollo.

# Parar sin borrar datos
docker compose --env-file .env.qa -f docker-compose.qa.yml --profile test-e2e --profile all --profile perf --profile sonar down

# Relanzar (SonarQube arranca r√°pido con datos existentes)
docker compose --env-file .env.qa -f docker-compose.qa.yml up -d


asi se ejecuta sin sonar RUN_SONAR=false en el .env se hace el cambio

docker compose --env-file .env.qa -f docker-compose.qa.yml build qa-runner
docker compose --env-file .env.qa -f docker-compose.qa.yml --profile test-e2e up -d --no-deps --force-recreate qa-runner


/////m√≥ntarlo completo en otro PC/////

Script PowerShell (Windows) ‚Äî cargue completo + ejecuci√≥n QA

Gu√°rdalo como qa-full-run.ps1 en la ra√≠z del proyecto (en el PC destino) y ejec√∫talo.
# qa-full-run.ps1$ErrorActionPreference = "Stop"$compose = "docker-compose.qa.yml"$envFile = ".env.qa"Write-Host "== FUC QA Runner: cargue completo (PC con internet) =="# 0) Validaciones b√°sicasdocker version | Out-Nulldocker compose version | Out-Nullif (!(Test-Path $compose)) { throw "No existe $compose en este directorio." }if (!(Test-Path $envFile)) { throw "No existe $envFile. Copialo o crealo antes." }# 1) Build completo (qa-runner + backend + frontend)Write-Host "`n[1/4] Build de imagenes (puede tardar la primera vez)..."docker compose --env-file $envFile -f $compose build# 2) Levantar servicios base (en background)Write-Host "`n[2/4] Levantando stack base..."docker compose --env-file $envFile -f $compose up -d db backend frontend sonar-db sonarqube allure# 3) Ejecutar QA runner (en foreground para ver salida y fallos)Write-Host "`n[3/4] Ejecutando qa-runner (genera reportes en .\qa\reports)..."docker compose --env-file $envFile -f $compose --profile test-e2e up --no-deps --force-recreate qa-runner# 4) Ubicaci√≥n de reportesWrite-Host "`n[4/4] Listo."Write-Host "Reportes en: .\qa\reports"Write-Host "Allure viewer (si aplica) en: http://localhost:5050"Write-Host "SonarQube en: http://localhost:9000"
Ejecutarlo
powershell -ExecutionPolicy Bypass -File .\qa-full-run.ps1
Si quieres ‚Äúsolo reportes r√°pidos‚Äù (sin Sonar)
$env:RUN_SONAR="false"powershell -ExecutionPolicy Bypass -File .\qa-full-run.ps1
Recomendaci√≥n para el PC destino

/////////////// instalar en Linux /////////

Requisitos en Linux (PC con internet)
Docker Engine instalado
Docker Compose v2 (comando docker compose)
Acceso a internet para descargar im√°genes/builds
Puertos libres (por defecto):
9000 (SonarQube)
5050 (Allure)
8080 (Backend, si lo expones)
3000 (Frontend, si lo expones)
15432 (Postgres Sonar, opcional para debug desde host)
1) Instalar Docker + Compose (Ubuntu/Debian)
sudo apt updatesudo apt install -y ca-certificates curl gnupg git# Repo oficial Dockersudo install -m 0755 -d /etc/apt/keyringscurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpgsudo chmod a+r /etc/apt/keyrings/docker.gpgecho \  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" \| sudo tee /etc/apt/sources.list.d/docker.list > /dev/nullsudo apt updatesudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin# Habilitar serviciosudo systemctl enable --now docker
(Opcional) Usar Docker sin sudo
sudo usermod -aG docker $USERnewgrp docker
Verifica:
docker versiondocker compose version
2) Clonar el proyecto en el servidor Linux
git clone <TU_REPO_URL> fuc-qacd fuc-qa
(Usa la URL de tu repo: GitHub/GitLab/etc.)

3) Preparar .env.qa
Crea/edita .env.qa (c√≥pialo desde tu PC si ya lo tienes):
cp .env.qa.example .env.qa 2>/dev/null || truenano .env.qa
Aseg√∫rate de tener valores reales para lo m√≠nimo:
MONGO_USER, MONGO_PASSWORD, MONGO_DB
SONAR_TOKEN (si quieres an√°lisis)
PROJECT_KEY (opcional)

4) Levantar el stack y ejecutar fuc-qa-runner

Cargue completo + ejecuci√≥n (con Sonar por defecto)
docker compose --env-file .env.qa -f docker-compose.qa.yml builddocker compose --env-file .env.qa -f docker-compose.qa.yml --profile test-e2e up -ddocker compose --env-file .env.qa -f docker-compose.qa.yml --profile test-e2e up --no-deps --force-recreate qa-runner

Corrida r√°pida (sin Sonar)

RUN_SONAR=false docker compose --env-file .env.qa -f docker-compose.qa.yml --profile test-e2e up --no-deps --force-recreate qa-runner

5) D√≥nde ver resultados
Reportes quedan en el host en: ./qa/reports/
SonarQube: http://<IP_DEL_SERVIDOR>:9000
Allure: http://<IP_DEL_SERVIDOR>:5050
Si tienes firewall (UFW), abre puertos:
sudo ufw allow 9000/tcpsudo ufw allow 5050/tcp
6) Operaci√≥n diaria (sin reinstalar)
Ver estado:
docker compose --env-file .env.qa -f docker-compose.qa.yml ps
Ver logs:
docker compose --env-file .env.qa -f docker-compose.qa.yml logs -f --tail=200 qa-runner
Detener sin borrar datos (recomendado):
docker compose --env-file .env.qa -f docker-compose.qa.yml down

No uses down -v salvo que quieras borrar completamente las bases/cach√©s (har√° que Sonar vuelva a tardar como la primera vez).




